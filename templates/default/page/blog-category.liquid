<div class="blog-category-page">
    <div class="container">
        <!-- Blog Navigation -->
        <nav class="breadcrumbs">
            <a href="{{ '/' | url: current_language }}">{{ 'Home' | t: current_language }}</a>
            <span>/</span>
            <a href="{{ 'blog' | section_url: current_language }}">{{ 'Blog' | t: current_language }}</a>
            <span>/</span>
            <span>{{ blog_category.name }}</span>
        </nav>
        
        <!-- Category Header -->
        <div class="category-header">
            <h1>{{ blog_category.name }}</h1>
            <p class="category-description">
                {% if posts.size == 1 %}
                    {{ posts.size }} {{ 'post in' | t: current_language }} {{ blog_category.name }}
                {% else %}
                    {{ posts.size }} {{ 'posts in' | t: current_language }} {{ blog_category.name }}
                {% endif %}
                {% if pagination %}
                ({{ 'page' | t: current_language }} {{ pagination.currentPage }} {{ 'of' | t: current_language }} {{ pagination.totalPages }})
                {% endif %}
            </p>
        </div>
        
        <!-- Blog Navigation -->
        <nav class="blog-nav">
            <a href="{{ 'blog' | section_url: current_language }}" class="nav-link">{{ 'All Posts' | t: current_language }}</a>
            
            {% if blog_categories.size > 0 %}
            <div class="categories-dropdown">
                <button class="dropdown-toggle active">{{ 'Categories' | t: current_language }}</button>
                <div class="dropdown-menu">
                    {% for category in blog_categories %}
                    <a href="{{ '/blog/category/' | append: category.slug | url: current_language }}"
                       class="dropdown-item {% if category.slug == blog_category.slug %}active{% endif %}">
                        {{ category.name }} ({{ category.count }})
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if blog_config.show_rss %}
            <a href="{{ '/blog/rss.xml' | url: current_language }}" class="nav-link rss-link" target="_blank">
                <i class="icon-rss"></i> RSS
            </a>
            {% endif %}
        </nav>
        
        <!-- Blog Posts -->
        {% if posts.size > 0 %}
        <div class="blog-posts">
            {% for post in posts %}
            <article class="blog-post-card">
                {% if post.image %}
                <div class="post-image">
                    <a href="{{ post.url | url: current_language }}">
                        <img src="{{ post.image | img_url: 'medium' }}" alt="{{ post.title }}" loading="lazy">
                    </a>
                    {% if post.featured %}
                    <span class="badge featured">{{ 'Featured' | t: current_language }}</span>
                    {% endif %}
                </div>
                {% endif %}
                
                <div class="post-content">
                    <div class="post-meta">
                        <time datetime="{{ post.date | date: '%Y-%m-%d' }}">
                            {{ post.date | date: '%B %d, %Y' }}
                        </time>
                        <span class="meta-separator">â€¢</span>
                        <span class="post-author">{{ post.author }}</span>
                    </div>
                    
                    <h2 class="post-title">
                        <a href="{{ post.url | url: current_language }}">{{ post.title }}</a>
                    </h2>
                    
                    <p class="post-excerpt">{{ post.excerpt }}</p>
                    
                    {% if post.tags.size > 0 %}
                    <div class="post-tags">
                        {% for tag in post.tags %}
                        <span class="tag">#{{ tag }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <div class="post-actions">
                        <a href="{{ post.url | url: current_language }}" class="btn btn-outline">
                            {{ 'Read More' | t: current_language }}
                        </a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if pagination %}
        {% include 'components/pagination', pagination: pagination %}
        {% endif %}
        
        {% else %}
        <div class="no-posts">
            <p>{{ 'No posts found in this category.' | t: current_language }}</p>
            <a href="{{ 'blog' | section_url: current_language }}" class="btn btn-primary">
                {{ 'View All Posts' | t: current_language }}
            </a>
        </div>
        {% endif %}
        
        <!-- Sidebar -->
        <aside class="blog-sidebar">
            <!-- Other Categories -->
            {% if blog_categories.size > 1 %}
            <div class="sidebar-widget">
                <h3>{{ 'Other Categories' | t: current_language }}</h3>
                <ul class="category-list">
                    {% for category in blog_categories %}
                    {% unless category.slug == blog_category.slug %}
                    <li>
                        <a href="{{ '/blog/category/' | append: category.slug | url: current_language }}">
                            {{ category.name }} <span class="count">({{ category.count }})</span>
                        </a>
                    </li>
                    {% endunless %}
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <!-- Recent Posts from All Categories -->
            {% if all_posts.size > posts.size %}
            <div class="sidebar-widget">
                <h3>{{ 'Recent Posts' | t: current_language }}</h3>
                <ul class="recent-posts">
                    {% for post in blog.posts limit: 5 %}
                    {% unless post.category == blog_category.slug %}
                    <li>
                        <a href="{{ post.url | url: current_language }}">
                            {{ post.title }}
                            <small>{{ post.date | date: '%b %d' }}</small>
                        </a>
                    </li>
                    {% endunless %}
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <!-- Back to Blog -->
            <div class="sidebar-widget">
                <a href="{{ 'blog' | section_url: current_language }}" class="btn btn-block btn-outline">
                    {{ 'View All Posts' | t: current_language }}
                </a>
            </div>
        </aside>
    </div>
</div>