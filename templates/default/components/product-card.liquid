<!-- Product Card Component -->
<article class="product-card bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden transition-shadow hover:shadow-lg group">
  <div class="product-card-image relative">
    <a href="{{ product.url }}" class="block aspect-w-1 aspect-h-1">
      {% if product.metadata.images.size > 0 %}
        <img src="{{ product.metadata.images[0] | asset_url: 'medium' }}" 
             alt="{{ product.metadata.title }}"
             class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
             loading="lazy">
      {% else %}
        <div class="w-full h-48 bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
          <svg class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
        </div>
      {% endif %}
      
      <!-- Product Badges -->
      {% if product.metadata.sale_price and product.metadata.sale_price < product.metadata.price %}
        <span class="absolute top-2 left-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded">
          {{ 'SALE' | t: current_language }}
        </span>
      {% endif %}
      
      {% if product.metadata.featured %}
        <span class="absolute top-2 right-2 bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded">
          {{ 'FEATURED' | t: current_language }}
        </span>
      {% endif %}
      
      {% if product.metadata.stock <= 0 %}
        <span class="absolute top-2 left-2 bg-gray-500 text-white text-xs font-bold px-2 py-1 rounded">
          {{ 'OUT OF STOCK' | t: current_language }}
        </span>
      {% endif %}
    </a>
    
    <!-- Quick Action Buttons -->
    <div class="absolute bottom-2 right-2 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
      {% if product.metadata.stock > 0 %}
        <button class="btn-quick-add bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full shadow-lg transition-colors"
                onclick="quickAddToCart('{{ product.metadata.sku }}', '{{ product.metadata.title | escape }}', {{ product.metadata.sale_price | default: product.metadata.price }})"
                title="{{ 'Quick add to cart' | t: current_language }}">
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5-5M7 13l-2.5 5M17 21a2 2 0 100-4 2 2 0 000 4zM9 21a2 2 0 100-4 2 2 0 000 4z"></path>
          </svg>
        </button>
      {% endif %}
      
      <button class="btn-quick-view bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-full shadow-lg transition-colors"
              onclick="openQuickView('{{ product.metadata.sku }}')"
              title="{{ 'Quick view' | t: current_language }}">
        <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
        </svg>
      </button>
    </div>

    <div id="zone-product-card-actions"></div>
  </div>
  
  <div class="product-card-content p-4">
    <header class="product-header mb-3">
      <h3 class="product-title text-lg font-semibold text-gray-900 dark:text-white mb-1">
        <a href="{{ product.url }}" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
          {{ product.metadata.title }}
        </a>
      </h3>
      
      {% if product.metadata.sku %}
        <div class="product-sku text-xs text-gray-500 dark:text-gray-400">
          {{ 'SKU' | t: current_language }}: {{ product.metadata.sku }}
        </div>
      {% endif %}
    </header>
    
    <!-- Price -->
    <div class="product-price mb-3">
      {% if product.metadata.sale_price and product.metadata.sale_price < product.metadata.price %}
        <div class="flex items-center space-x-2">
          <span class="price-sale text-lg font-bold text-red-600">
            {{ product.metadata.sale_price | money: current_language_data.currency }}
          </span>
          <span class="price-original text-sm text-gray-500 line-through">
            {{ product.metadata.price | money: current_language_data.currency }}
          </span>
        </div>
        <div class="price-save text-xs text-green-600 font-medium">
          {{ 'Save' | t: current_language }} {{ product.metadata.price | minus: product.metadata.sale_price | money: current_language_data.currency }}
        </div>
      {% else %}
        <span class="price-current text-lg font-bold text-gray-900 dark:text-white">
          {{ product.metadata.price | money: current_language_data.currency }}
        </span>
      {% endif %}
    </div>
    
    <!-- Short Description -->
    {% if product.excerpt %}
      <div class="product-excerpt text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2">
        {{ product.excerpt | strip_html | truncate_words: 15 }}
      </div>
    {% endif %}
    
    <!-- Tags -->
    {% if product.metadata.tags.size > 0 %}
      <div class="product-tags flex flex-wrap gap-1 mb-3">
        {% for tag in product.metadata.tags limit: 3 %}
          <span class="tag text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded">
            {{ tag }}
          </span>
        {% endfor %}
      </div>
    {% endif %}
    
    <!-- Stock Status -->
    <div class="product-stock mb-4">
      {% if product.metadata.stock > 0 %}
        <span class="inline-flex items-center text-xs text-green-600 dark:text-green-400">
          <svg class="h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
          </svg>
          {{ 'In Stock' | t: current_language }} ({{ product.metadata.stock }})
        </span>
      {% else %}
        <span class="inline-flex items-center text-xs text-red-600 dark:text-red-400">
          <svg class="h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
          </svg>
          {{ 'Out of Stock' | t: current_language }}
        </span>
      {% endif %}
    </div>
    
    <!-- Action Buttons -->
    <footer class="product-footer flex space-x-2">
      {% if product.metadata.stock > 0 %}
        <button class="btn btn-primary flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded font-medium transition-colors"
                onclick="addToCart(event, '{{ product.metadata.sku }}', '{{ product.metadata.title | escape }}', {{ product.metadata.sale_price | default: product.metadata.price }})">
          {{ 'Add to Cart' | t: current_language }}
        </button>
      {% else %}
        <button class="btn btn-secondary flex-1 bg-gray-400 text-white py-2 px-4 rounded font-medium cursor-not-allowed" disabled>
          {{ 'Out of Stock' | t: current_language }}
        </button>
      {% endif %}
      
      <a href="{{ product.url }}" 
         class="btn btn-outline flex-shrink-0 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 py-2 px-3 rounded font-medium transition-colors">
        {{ 'View' | t: current_language }}
      </a>
    </footer>
  </div>
</article>