<!DOCTYPE html>
<html lang="{{ page.locale | default: 'cs-cz' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Meta Tags -->
  <title>{{ page.title }}{% if site.name %} | {{ site.name }}{% endif %}</title>
  {% if page.description %}
    <meta name="description" content="{{ page.description }}">
  {% endif %}
  {% if page.url %}
    <link rel="canonical" href="{{ page.url | absolute_url }}">
  {% endif %}
  
  <!-- Minimal Styles -->
  <style>
    /* Minimal CSS Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6; 
      color: #333; 
      max-width: 1200px; 
      margin: 0 auto; 
      padding: 20px;
    }
    
    /* Typography */
    h1, h2, h3, h4, h5, h6 { margin-bottom: 1rem; }
    h1 { font-size: 2rem; }
    h2 { font-size: 1.5rem; }
    h3 { font-size: 1.25rem; }
    p { margin-bottom: 1rem; }
    a { color: #0066cc; text-decoration: none; }
    a:hover { text-decoration: underline; }
    
    /* Header */
    .header { 
      border-bottom: 1px solid #eee; 
      padding-bottom: 20px; 
      margin-bottom: 40px; 
    }
    .logo { font-size: 1.5rem; font-weight: bold; }
    .nav { margin-top: 10px; }
    .nav a { margin-right: 20px; }
    
    /* Content */
    .main { min-height: 400px; }
    
    /* Product Grid */
    .products-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
      gap: 20px; 
      margin: 20px 0; 
    }
    .product-card { 
      border: 1px solid #eee; 
      padding: 15px; 
      border-radius: 4px; 
    }
    .product-card img { 
      width: 100%; 
      height: 200px; 
      object-fit: cover; 
      margin-bottom: 10px; 
    }
    .product-card h3 { 
      margin-bottom: 5px; 
      font-size: 1rem; 
    }
    .product-card .price { 
      font-weight: bold; 
      color: #0066cc; 
      font-size: 1.1rem; 
    }
    
    /* Forms */
    input, button, select, textarea { 
      padding: 10px; 
      border: 1px solid #ddd; 
      border-radius: 4px; 
      margin-bottom: 10px; 
    }
    button { 
      background: #0066cc; 
      color: white; 
      border: none; 
      cursor: pointer; 
    }
    button:hover { background: #0052a3; }
    
    /* Cart */
    .cart-widget { 
      position: fixed; 
      top: 20px; 
      right: 20px; 
      background: #0066cc; 
      color: white; 
      padding: 10px 15px; 
      border-radius: 20px; 
      font-size: 14px; 
    }
    
    /* Footer */
    .footer { 
      border-top: 1px solid #eee; 
      padding-top: 20px; 
      margin-top: 40px; 
      text-align: center; 
      color: #666; 
      font-size: 14px; 
    }
    
    /* Mobile */
    @media (max-width: 768px) {
      body { padding: 10px; }
      .products-grid { grid-template-columns: 1fr; }
      .cart-widget { position: static; display: inline-block; margin-bottom: 20px; }
    }
  </style>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ 'css/minimal.css' | asset_url }}">
  
  {% zone 'zone-head' %}
</head>
<body>
  <div id="zone-body-start"></div>
  <header class="header">
    <div class="logo">
      {% if site.name %}
        <a href="/">{{ site.name }}</a>
      {% else %}
        <a href="/">E-shop</a>
      {% endif %}
    </div>
    <nav class="nav">
      <a href="/">Domů</a>
      {% for category in site.categories %}
        {% if category.featured %}
          <a href="{{ category.url }}">{{ category.title }}</a>
        {% endif %}
      {% endfor %}
      <a href="/cart/">Košík</a>
    </nav>
  </header>
  
  <div id="zone-after-header"></div>

  <!-- Cart Widget -->
  <div class="cart-widget" id="cart-widget">
    Košík: <span id="cart-count">0</span>
  </div>

  <main class="main">
    {{ content }}
    <div id="zone-after-main"></div>
  </main>
  
  <div id="zone-before-footer"></div>

  <footer class="footer">
    <div id="zone-footer-start"></div>
    <p>&copy; {{ 'now' | date: '%Y' }} {{ site.name | default: 'E-shop' }}. Všechna práva vyhrazena.</p>
    <div id="zone-after-footer"></div>
  </footer>

  <!-- GitCart.js -->
  <script src="{{ 'js/gitcart.js' | asset_url }}"></script>
  <script src="{{ 'js/plugin-zones.js' | asset_url }}"></script>
  
  <!-- Cart Widget Update -->
  <script>
    if (typeof GitCart !== 'undefined') {
      GitCart.on('gitcart:cart:updated', function(data) {
        document.getElementById('cart-count').textContent = data.itemCount || 0;
      });
      
      // Initialize cart count
      document.addEventListener('DOMContentLoaded', function() {
        const count = GitCart.cart.getItemCount();
        document.getElementById('cart-count').textContent = count;
      });
    }
  </script>
  
  <div id="zone-body-end"></div>
</body>
</html>